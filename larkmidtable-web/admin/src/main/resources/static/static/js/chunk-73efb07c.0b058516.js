(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73efb07c"],{"1bf5":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"mycode",staticClass:"codesql",domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}})},i=[],r=(a("0f7c"),a("a7be"),a("f6b6"),a("56b3"));a("8c33"),a("31c5"),a("ffda"),a("9b74"),a("991c");var l={props:{value:{type:String,default:""},sqlStyle:{type:String,default:"default"},readOnly:{type:[Boolean,String]}},data:function(){return{editor:null}},computed:{newVal:function(){return this.editor?this.editor.getValue():""}},watch:{newVal:function(t,e){this.editor&&(this.$emit("input",this.editor.getValue()),this.$emit("changeTextarea",this.editor.getValue()))}},mounted:function(){var t=this,e="text/x-mariadb";console.dir(r),this.editor=r.fromTextArea(this.$refs.mycode,{value:this.value,mode:e,indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,matchBrackets:!0,cursorHeight:1,lineWrapping:!0,readOnly:this.readOnly,extraKeys:{Ctrl:"autocomplete"},hintOptions:{completeSingle:!1}}),this.editor.on("inputRead",(function(){t.editor.showHint()}))},methods:{setVal:function(){this.editor&&(""===this.value?this.editor.setValue(""):this.editor.setValue(this.value))}}},s=l,o=(a("a96bd"),a("2877")),c=Object(o["a"])(s,n,i,!1,null,null,null);e["a"]=c.exports},"46b1":function(t,e,a){"use strict";a("ed38")},5258:function(t,e,a){},"6c35":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dev-sql"},[t.sqlDataList?a("div",{staticClass:"nav-bar"},[a("div",{staticClass:"search"},[a("el-input",{attrs:{size:"small","prefix-icon":"el-icon-search",placeholder:"请输入查询关键字"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch(e)}},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:t.handleSearch}},[t._v(" 查询 ")])],1),a("ul",t._l(t.sqlDataList,(function(e,n){return a("li",{key:"sql-data-list-"+n,class:{"cur-li":t.curData&&t.curData.id===e.id},on:{click:function(a){return t.setCurData(e)}}},[a("div",{staticClass:"icon-name"},[a("span",{staticClass:"icon"},[t._v(t._s(e.tasktype))]),a("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(e.name))])]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text"},on:{click:function(a){return a.stopPropagation(),t.handleUpdate(e)}}},[t._v(" 编辑 ")])],1)})),0)]):t._e(),a("div",{staticClass:"app-main"},[a("div",{staticClass:"buttons"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleAdd}},[t._v("新建")]),a("el-button",{attrs:{type:"primary",size:"small",disabled:!t.curData},on:{click:t.formartSql}},[t._v("格式化SQL")]),a("el-button",{attrs:{type:"primary",size:"small",disabled:!t.curData},on:{click:t.executeData}},[t._v("验证SQL")]),a("el-button",{attrs:{type:"primary",size:"small",disabled:!t.curData},on:{click:function(){t.curData.sql_text=t.sqlText,t.updateData(t.curData)}}},[t._v(" 保存 ")])],1),t.curData?a("div",{staticClass:"editor"},[a("SqlEditor",{model:{value:t.sqlText,callback:function(e){t.sqlText=e},expression:"sqlText"}}),a("div",{staticClass:"result",domProps:{innerHTML:t._s(t.jsonResult)}})],1):t._e()]),a("InfoDialog",{ref:"InfoDialog"})],1)},i=[],r=(a("ac1f"),a("5319"),a("e9c4"),a("1bf5")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{ref:"InfoDialog",attrs:{visible:t.dialogShow,title:t.infoTitle,width:"600px","append-to-body":""},on:{"update:visible":function(e){t.dialogShow=e},close:t.close}},[a("el-form",{ref:"infoDialogForm",attrs:{model:t.formData,rules:t.rules,size:"medium","label-width":"100px"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"任务名称",prop:"name"}},[a("el-input",{attrs:{clearable:!0,placeholder:"请输入"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name","string"===typeof e?e.trim():e)},expression:"formData.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务类型",prop:"tasktype"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formData.tasktype,callback:function(e){t.$set(t.formData,"tasktype",e)},expression:"formData.tasktype"}},[a("el-option",{attrs:{label:"Flink",value:"Flink"}}),a("el-option",{attrs:{label:"Spark",value:"Spark"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"运行方式",prop:"runtype"}},[a("el-input",{attrs:{clearable:!0,placeholder:"请输入"},model:{value:t.formData.runtype,callback:function(e){t.$set(t.formData,"runtype","string"===typeof e?e.trim():e)},expression:"formData.runtype"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"运行参数",prop:"run_param"}},[a("el-input",{attrs:{clearable:!0,placeholder:"请输入"},model:{value:t.formData.run_param,callback:function(e){t.$set(t.formData,"run_param",e)},expression:"formData.run_param"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"任务描述",prop:"task_describe"}},[a("el-input",{attrs:{clearable:!0,type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入"},model:{value:t.formData.task_describe,callback:function(e){t.$set(t.formData,"task_describe","string"===typeof e?e.trim():e)},expression:"formData.task_describe"}})],1)],1)],1),a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确定")]),a("el-button",{attrs:{type:"info"},on:{click:t.handleCancel}},[t._v("取消")])],1)],1)],1)},s=[],o={name:"ChangePassword",data:function(){return{rules:{name:[{required:!0,message:"不能为空",trigger:"blur"}],tasktype:[{required:!0,message:"不能为空",trigger:"blur"}],runtype:[{required:!0,message:"不能为空",trigger:"blur"}]},dialogShow:!1,onClose:null,onSubmit:null,infoTitle:"详细信息",defaultFormData:{id:"",name:"",type:"SQL",tasktype:"Flink",runtype:"yarn-session",run_param:"",sql_text:"",stask_describe:""},formData:null}},created:function(){this.formData=Object.assign({},this.defaultFormData)},methods:{openDialog:function(t){var e=t.formData,a=void 0===e?{}:e,n=t.infoTitle,i=void 0===n?"":n,r=t.onSubmit,l=void 0===r?null:r,s=t.onClose,o=void 0===s?null:s;this.onSubmit=l,this.onClose=o,this.infoTitle=i,this.formData=Object.assign({},this.defaultFormData,a),this.formData.type="SQL",this.dialogShow=!0},handleSubmit:function(){var t=this;this.$refs["infoDialogForm"].validate((function(e){var a;return e?(null===(a=t.onSubmit)||void 0===a||a.call(t,t.formData),t.dialogShow=!1,!0):(t.$message.error("填写异常，请仔细检查"),!1)}))},handleCancel:function(){this.dialogShow=!1},close:function(){var t;null===(t=this.onClose)||void 0===t||t.call(this,this.formData)}}},c=o,u=(a("46b1"),a("2877")),d=Object(u["a"])(c,l,s,!1,null,"5a8806c5",null),f=d.exports,p=a("8bb3"),m=a("db05"),h={nmae:"SQLlistManageDevelopment",components:{InfoDialog:f,SqlEditor:r["a"]},data:function(){return{sqlDataList:null,searchInput:"",jsonResult:"",sqlText:"",curData:null,dataList:[]}},mounted:function(){var t=this;this.handleSearch().then((function(){t.sqlDataList.length&&t.setCurData(t.sqlDataList[0])}))},methods:{getData:function(){var t=this,e={type:"SQL"};return this.searchInput&&(e["name"]=this.searchInput),Object(p["d"])(e).then((function(e){t.sqlDataList=e.content.data}))},setCurData:function(t){var e=this,a=function(){e.curData=null,setTimeout((function(){var a;e.curData=t,e.sqlText=(null===(a=e.curData)||void 0===a?void 0:a.sql_text)||""}),200)};this.curData&&this.curData.sql_text!==this.sqlText?this.$confirm("该操作将覆盖当前未保存修改，是否继续","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(t){return a()})):a()},handleSearch:function(){return this.getData()},updateData:function(t){var e=this;Object(p["b"])(t).then((function(){e.$message.success("更新成功"),e.getData()}))},handleUpdate:function(t){this.$refs["InfoDialog"].openDialog({formData:t,infoTitle:"更新",onSubmit:this.updateData})},handleAdd:function(){var t=this;this.$refs["InfoDialog"].openDialog({infoTitle:"新增",onSubmit:function(e){Object(p["a"])(e).then((function(){t.$message.success("更新成功"),t.getData()}))}})},formartSql:function(){var t=this;this.sqlText=Object(m["format"])(this.sqlText).replace(/# /g,"#").replace(/{ /g,"{").replace(/ }/g,"}").replace(/< foreach/g,"\n<foreach\n").replace(/< \/ foreach >/g,"\n</foreach>\n").replace(/< if/g,"\n<if").replace(/< \/ if >/g,"\n</if>\n").replace(/<\nwhere\n {2}>/g,"\n<where>\n").replace(/< \/\nwhere\n {2}>/g,"\n</where>\n").replace(/< trim/g,"\n<trim").replace(/< \/ trim >/g,"\n</trim>\n").toLowerCase();var e=this.curData;this.curData=null,setTimeout((function(){t.curData=e}),200)},executeData:function(t){var e=this,a={sql_text:this.sqlText};Object(p["c"])(a).then((function(t){e.$message.success("运行成功"),e.jsonResult=JSON.stringify(t,null,2)}))}}},b=h,v=(a("e1af"),Object(u["a"])(b,n,i,!1,null,"2f8edbac",null));e["default"]=v.exports},"8bb3":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return l})),a.d(e,"e",(function(){return s})),a.d(e,"d",(function(){return o}));var n=a("b775");function i(t){return Object(n["a"])({url:"api/devJar/add",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/api/devJar/update",method:"post",data:t})}function l(t){return t=Object.assign({sql_text:t.sql_text},t||{}),Object(n["a"])({url:"/api/deployTask/checkSQL",method:"get",params:t})}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(n["a"])({url:"/api/devTask/upload",method:"post",data:t,onUploadProgress:function(t){var a=t.loaded/t.total*100|0;console.log("上传进度：".concat(a,"%")),null===e||void 0===e||e(a)}})}function o(t){return t=Object.assign({type:"SQL"},t||{}),Object(n["a"])({url:"/api/devTask/list",method:"get",params:t})}},a96bd:function(t,e,a){"use strict";a("5258")},af42:function(t,e,a){},e1af:function(t,e,a){"use strict";a("af42")},ed38:function(t,e,a){}}]);